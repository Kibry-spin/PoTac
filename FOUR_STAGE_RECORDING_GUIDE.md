# PoTac å››é˜¶æ®µå½•åˆ¶åŠŸèƒ½ä½¿ç”¨è¯´æ˜

## åŠŸèƒ½æ¦‚è¿°

æ–°çš„å››é˜¶æ®µå½•åˆ¶æ¨¡å¼é€šè¿‡ç©ºæ ¼é”®æ§åˆ¶ï¼Œå®ç°CSIç›¸æœºå’Œè§¦è§‰ä¼ æ„Ÿå™¨çš„åˆ†æ®µå½•åˆ¶ï¼š

```
ç©ºæ ¼1 â†’ ç©ºæ ¼2 â†’ ç©ºæ ¼3 â†’ ç©ºæ ¼4 â†’ å®Œæˆ
```

## å½•åˆ¶æµç¨‹

### ç¬¬1æ¬¡æŒ‰ç©ºæ ¼ï¼šå¼€å§‹å½•åˆ¶
- **CSIç›¸æœº**: å¼€å§‹å½•åˆ¶ âœ…
- **VTè§¦è§‰ä¼ æ„Ÿå™¨**: å¼€å§‹å½•åˆ¶åˆ° `vt_1/static/` âœ…
- **çŠ¶æ€**: `Stage 1/4: CSI + VT recording`

### ç¬¬2æ¬¡æŒ‰ç©ºæ ¼ï¼šVTåœæ­¢ï¼Œä¿å­˜åˆ°static/
- **CSIç›¸æœº**: ç»§ç»­å½•åˆ¶ âœ…
- **VTè§¦è§‰ä¼ æ„Ÿå™¨**: åœæ­¢å½•åˆ¶ï¼Œä¿å­˜åˆ° `vt_1/static/static.mp4` âœ…
- **çŠ¶æ€**: `Stage 2/4: VT saved to static/, CSI continues`

### ç¬¬3æ¬¡æŒ‰ç©ºæ ¼ï¼šVTé‡æ–°å¼€å§‹å½•åˆ¶
- **CSIç›¸æœº**: ç»§ç»­å½•åˆ¶ âœ…
- **VTè§¦è§‰ä¼ æ„Ÿå™¨**: é‡æ–°å¼€å§‹å½•åˆ¶åˆ° `vt_1/contact/` âœ…
- **çŠ¶æ€**: `Stage 3/4: VT restarted, CSI continues`

### ç¬¬4æ¬¡æŒ‰ç©ºæ ¼ï¼šå…¨éƒ¨åœæ­¢
- **CSIç›¸æœº**: åœæ­¢å½•åˆ¶ï¼Œä¿å­˜åˆ° `csi_camera/csi_camera.mp4` âœ…
- **VTè§¦è§‰ä¼ æ„Ÿå™¨**: åœæ­¢å½•åˆ¶ï¼Œä¿å­˜åˆ° `vt_1/contact/contact.mp4` âœ…
- **çŠ¶æ€**: `Stage 4/4: All completed!`
- **å¼¹çª—**: è‡ªåŠ¨å¼¹å‡ºlabelè¾“å…¥æ¡†ï¼Œè¦æ±‚è¾“å…¥æœ¬æ¬¡å½•åˆ¶çš„æ ‡ç­¾ä¿¡æ¯
  - æ–‡æœ¬æ¡†è‡ªåŠ¨é€‰ä¸­ï¼ˆè‡ªåŠ¨è·å¾—ç„¦ç‚¹ï¼‰
  - è¾“å…¥labelåæŒ‰ **Enteré”®** ä¿å­˜
  - Labelä¼šä¿å­˜åˆ° `session_metadata.json` æ–‡ä»¶ä¸­
  - ä¿å­˜å®Œæˆåè‡ªåŠ¨é‡ç½®ï¼Œå¯ä»¥å¼€å§‹ä¸‹ä¸€ä¸ªsessionå½•åˆ¶

## æ•°æ®ç»“æ„

æ¯æ¬¡å½•åˆ¶ä¼šç”Ÿæˆä¸€ä¸ªsessionç›®å½•ï¼š

```
data/
â””â”€â”€ session_YYYYMMDD_HHMMSS/
    â”œâ”€â”€ csi_camera/
    â”‚   â””â”€â”€ csi_camera.mp4          # CSIç›¸æœºå®Œæ•´å½•åˆ¶
    â”œâ”€â”€ vt_1/
    â”‚   â”œâ”€â”€ static/
    â”‚   â”‚   â””â”€â”€ static.mp4           # è§¦è§‰ä¼ æ„Ÿå™¨é™æ€é˜¶æ®µ
    â”‚   â””â”€â”€ contact/
    â”‚       â””â”€â”€ contact.mp4          # è§¦è§‰ä¼ æ„Ÿå™¨æ¥è§¦é˜¶æ®µ
    â””â”€â”€ session_metadata.json        # å½•åˆ¶å…ƒæ•°æ®
```

## å…ƒæ•°æ® (session_metadata.json)

```json
{
  "session_name": "session_20260104_153045",
  "stage_1_start": "2026-01-04T15:30:45.123",
  "stage_2_start": "2026-01-04T15:30:50.456",
  "stage_3_start": "2026-01-04T15:30:55.789",
  "stage_4_start": "2026-01-04T15:31:00.012",
  "durations": {
    "static_recording": 5.333,      // é™æ€é˜¶æ®µæ—¶é•¿ï¼ˆç§’ï¼‰
    "csi_only": 5.333,               // ä»…CSIå½•åˆ¶æ—¶é•¿
    "contact_recording": 4.223,      // æ¥è§¦é˜¶æ®µæ—¶é•¿
    "total": 14.889                  // æ€»æ—¶é•¿
  },
  "files": {
    "csi_video": "data/session_xxx/csi_camera/csi_camera.mp4",
    "vt_static_video": "data/session_xxx/vt_1/static/static.mp4",
    "vt_contact_video": "data/session_xxx/vt_1/contact/contact.mp4"
  }
}
```

## ä½¿ç”¨æ­¥éª¤

1. **å¯åŠ¨ç¨‹åº**
   ```bash
   python main.py
   ```

2. **å¯åŠ¨ç›¸æœº**
   - ç‚¹å‡» "Start Camera" æŒ‰é’®
   - æˆ–è€…ç­‰å¾…è‡ªåŠ¨åˆå§‹åŒ–

3. **å¼€å§‹å½•åˆ¶**
   - æŒ‰ **ç©ºæ ¼é”®** (ç¬¬1æ¬¡) â†’ å¼€å§‹å½•åˆ¶

4. **ç»“æŸstaticé˜¶æ®µ**
   - æŒ‰ **ç©ºæ ¼é”®** (ç¬¬2æ¬¡) â†’ VTä¿å­˜åˆ°static/

5. **é‡æ–°å¼€å§‹VTå½•åˆ¶**
   - æŒ‰ **ç©ºæ ¼é”®** (ç¬¬3æ¬¡) â†’ VTé‡æ–°å½•åˆ¶

6. **ç»“æŸå…¨éƒ¨å½•åˆ¶**
   - æŒ‰ **ç©ºæ ¼é”®** (ç¬¬4æ¬¡) â†’ å…¨éƒ¨åœæ­¢å¹¶ä¿å­˜

7. **æŸ¥çœ‹æ•°æ®**
   - æ•°æ®ä¿å­˜åœ¨ `data/session_YYYYMMDD_HHMMSS/`

## è‡ªåŠ¨é‡ç½®

å®Œæˆç¬¬4é˜¶æ®µåï¼Œç³»ç»Ÿä¼šåœ¨2ç§’åè‡ªåŠ¨é‡ç½®ä¸ºIDLEçŠ¶æ€ï¼Œå¯ä»¥å¼€å§‹ä¸‹ä¸€æ¬¡å½•åˆ¶ã€‚

## é”®ç›˜å¿«æ·é”®

- **ç©ºæ ¼é”®**: æ¨è¿›åˆ°ä¸‹ä¸€é˜¶æ®µ
- **æ³¨æ„**: å½“æ–‡æœ¬è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹æ—¶ï¼Œç©ºæ ¼é”®æ­£å¸¸è¾“å…¥ç©ºæ ¼

## çŠ¶æ€æŒ‡ç¤º

- ğŸ”´ **çº¢è‰²**: æ­£åœ¨å½•åˆ¶ (Stage 1-3)
- ğŸŸ¢ **ç»¿è‰²**: å°±ç»ª/å®Œæˆ (IDLEæˆ–Stage 4)

## æ³¨æ„äº‹é¡¹

1. **å¿…é¡»æœ‰VTä¼ æ„Ÿå™¨**: éœ€è¦è‡³å°‘è¿æ¥ä¸€ä¸ªè§¦è§‰ä¼ æ„Ÿå™¨
2. **é¡ºåºæ‰§è¡Œ**: å¿…é¡»æŒ‰é¡ºåºæŒ‰4æ¬¡ç©ºæ ¼ï¼Œä¸èƒ½è·³è¿‡
3. **è§†é¢‘æ ¼å¼**: æ‰€æœ‰å½•åˆ¶éƒ½æ˜¯MP4æ ¼å¼
4. **è‡ªåŠ¨ä¿å­˜**: æ¯æ¬¡æŒ‰ç©ºæ ¼éƒ½ä¼šè‡ªåŠ¨ä¿å­˜å½“å‰é˜¶æ®µçš„æ•°æ®

## ä¸æ—§å½•åˆ¶æ¨¡å¼çš„åŒºåˆ«

| ç‰¹æ€§ | æ—§æ¨¡å¼ (SynchronizedRecorder) | æ–°æ¨¡å¼ (FourStageRecorder) |
|------|------------------------------|----------------------------|
| ä¿å­˜æ ¼å¼ | å›¾ç‰‡åºåˆ— + æ—¶é—´æˆ³ | è§†é¢‘æ–‡ä»¶ (MP4) |
| æ—¶é—´åŒæ­¥ | ä¸¥æ ¼æ—¶é—´æˆ³å¯¹é½ | æ— éœ€ä¸¥æ ¼åŒæ­¥ |
| æ§åˆ¶æ–¹å¼ | å¼€å§‹/åœæ­¢å½•åˆ¶ | 4é˜¶æ®µç©ºæ ¼é”®æ§åˆ¶ |
| è§¦è§‰æ•°æ® | ä¿å­˜æ‰€æœ‰å¸§ | åˆ†æ®µä¿å­˜ (static + contact) |
| æ•°æ®å¤§å° | è¾ƒå¤§ï¼ˆæ‰€æœ‰å¸§ï¼‰ | è¾ƒå°ï¼ˆè§†é¢‘å‹ç¼©ï¼‰ |

## æ•…éšœæ’æŸ¥

### é—®é¢˜: æŒ‰ç©ºæ ¼é”®æ²¡ååº”
- **æ£€æŸ¥**: ç¡®è®¤ç›¸æœºå·²å¯åŠ¨
- **æ£€æŸ¥**: ç¡®è®¤VTä¼ æ„Ÿå™¨å·²è¿æ¥
- **æ£€æŸ¥**: æŸ¥çœ‹æ—¥å¿—ä¸­æ˜¯å¦æœ‰é”™è¯¯

### é—®é¢˜: VTè§†é¢‘æ–‡ä»¶ä¸ºç©º
- **åŸå› **: VTä¼ æ„Ÿå™¨å¯èƒ½æœªæ­£å¸¸å¯åŠ¨
- **è§£å†³**: æ£€æŸ¥VTä¼ æ„Ÿå™¨è¿æ¥å’Œåˆå§‹åŒ–æ—¥å¿—

### é—®é¢˜: CSIè§†é¢‘æ–‡ä»¶å¾ˆå¤§
- **åŸå› **: é«˜åˆ†è¾¨ç‡é•¿æ—¶é—´å½•åˆ¶
- **è§£å†³**: é™ä½CSIç›¸æœºåˆ†è¾¨ç‡æˆ–ç¼©çŸ­å½•åˆ¶æ—¶é—´

## æ—¥å¿—ç¤ºä¾‹

```
[INFO] FourStageRecorder: STAGE 1 - CSI + VT recording started
[INFO] MainWindow: SPACE pressed - Stage 1: CSI + VT recording started
[INFO] FourStageRecorder: STAGE 2 - VT stopped (duration: 5.3s), CSI continues
[INFO] MainWindow: SPACE pressed - Stage 2: VT saved to static/ (5.3s), CSI continues
[INFO] FourStageRecorder: STAGE 3 - VT restarted (CSI only duration: 3.2s)
[INFO] MainWindow: SPACE pressed - Stage 3: VT restarted, CSI continues
[INFO] FourStageRecorder: STAGE 4 - All recording completed
[INFO] FourStageRecorder: Total recording duration: 12.8s
[INFO] MainWindow: Recording completed - data/session_20260104_153045
```

---

## ä»£ç æ–‡ä»¶

- **four_stage_recorder.py**: å››é˜¶æ®µå½•åˆ¶ç®¡ç†å™¨
- **main_window.py**: GUIç©ºæ ¼é”®å¤„ç†é€»è¾‘
- **settings.json**: é…ç½®æ–‡ä»¶

**ä¿®æ”¹æ—¶é—´**: 2026-01-04
**ç‰ˆæœ¬**: 1.0.0
